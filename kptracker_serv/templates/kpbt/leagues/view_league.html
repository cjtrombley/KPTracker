{% extends 'index.html' %}

{% block title %}<title>Kingpin Bowling Tracker - View Leagues</title>{% endblock %}

{% block page_content %}
<div class="container-fluid">
<div class="row">
<div class="col-md-12">
<header>
  <h2 class="form-head mb-3"> {{ league.name }} </h2>
</header>        
{% if request.user == secretary or request.user.is_superuser %} <p><a href="{% url 'manage-league' league.bowling_center.name league.name %}"> Manage League</a></p> {% endif %}

{% if league.schedule.current_week > 1 %}
    <h4 class="form-head mb-3">Last Week's Results:</h4>
    <div class="table-responsive">
    <table class="table table-striped table-bordered table-hover">
        {% for score in last_week_scores %}
            {% cycle 'row' '' as row silent %}
            {% if row %} <thead class="table-danger"><tr class="text-center font-weight-bolder"> {% endif %}
        <td> {{ last_week_scores.weekly_points_won}} </td>
        {% if not row %} </tr> </thead> {% endif %}
        {% endfor %}
    </table>
    </div> 
{% endif %}








<h4 class="form-head mb-3">Standings:</h4>

<div class="table-responsive">    
<table class="table table-striped table-bordered table-hover">
	<thead class="table-danger">
        <tr class="text-center font-weight-bolder">
            <th>Team Name</th> <th> Total Points Won</th> <th> Total Points Lost</th> <th> Total Pinfall</th>
        </tr>
    
    </thead>
    <tbody class="text-justify table-info font-weight-bolder">
    {% for team in teams %}
    
        <tr>
            <td>{{ team.name }}</td><td>{{team.team_points_won}}</td><td>{{team.team_points_lost}}</td><td>{{team.total_pinfall}}</td>
        </tr>
    </tbody>
    {% endfor%}
</table>
</div>    
  
<h2 class="form-head mb-3">League Schedule</h2>
<p class="lead text-white">Current Week: {{league.current_week }} </p>
<p class="lead text-white"> <a href="{% url 'view-center-league-schedule' league.bowling_center.name league.name %}"> View Schedule</a></p>
<p class="lead text-white">This week's lane pairings: </p>
<div class="table-responsive">     
<table class="table table-striped table-bordered table-hover">
    <tr class="text-center font-weight-bolder">
    <th>Lanes</th>
    {% for pair in weekly_pairings %}
    
            <td> {{ pair.get_lanes_by_pairnumber }} </td>
    
    {% endfor %}
    </tr>
    
    <tr class="text-center font-weight-bolder">
    <th> Team Numbers</th>
    {% for pair in weekly_pairings %}
        
            <td> {{ pair }}</td>
    
    {% endfor %}
    </tr>
</table>
</div>
    
<h2 class="form-head mb-3">League Bowlers</h2>
<div class="table-responsive">    
<table class="table table-striped table-bordered table-hover">
    <thead class="table-danger">
        <tr class="text-center font-weight-bolder">
            <td>First Name</td><td>Last Name</td><td>League Average</td><td>Games Bowled</td><td>High Scratch Game</td><td>High Handicap Game</td><td>High Scratch Series</td><td>High Handicap Series</td><td>Total Scratch Pins</td><td>Total Handicap Pins</td>
        </tr>
    </thead>
    <tbody class="table-info">
    {% for bowler in bowlers %} 
        <tr class="text-center font-weight-bolder">
            <td>{{bowler.bowler.first_name}}</td><td>{{bowler.bowler.last_name}}</td><td>{{bowler.league_average}}</td><td>{{bowler.games_bowled}}</td><td>{{bowler.league_high_scratch_game}}</td><td>{{bowler.league_high_handicap_game}}</td><td>{{bowler.league_high_scratch_series}}</td><td>{{bowler.league_high_handicap_series}}</td><td>{{bowler.league_total_scratch}}</td><td>{{bowler.league_total_handicap}}</td>
        </tr>
    {% endfor %}
    </tbody>
</table>
</div>    
<!--    
    <tr>
		<td> League </td>
		<td> {{ league.name }} </td>
	<tr>
	
	<tr>
		<td> Bowling Center </td>
		<td> {{ league.bowling_center.name }} </td>
	</tr>
	
	{% for team in teams %}
	<tr>
		<td> Team Name </td>
        <td> <a href="{% url 'view-center-league-team-by-name' league.bowling_center.name league.name team.name %}"> {{ team.name }} </a></td>
	</tr>	
	{% endfor %}
    
</table>




<div>
<h4> League Rules</h4>
{{ rules.as_p }}

<h4> League Schedule</h4>
{{ schedule.as_p }}
</div>
//-->
</div>
</div>
</div>
{% endblock %}